{% extends 'base.html' %}

{% load socialaccount %}

{% block content %}

{% if user.is_authenticated %}
    <h2>Shopping Cart</h2>
    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <p style="color:blue;"{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</>
            {% endfor %}
        </ul>
    {% endif %}
    <main>
        <div class= "container">
            <div class="table-responsive text-nowrap">
        <h3>
            <strong>Your Cart</strong>
        </h3>
        <table class="table">
            <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Item Name</th>
                <th scope="col">Units</th>
                <th scope="col">Instructor</th>
            </tr>
            </thead>
            <tbody>
            {% for cart_item in object.courses.all %}
            <tr>
                <th scope="row">{{ forloop.counter }}</th>
                <td>{{cart_item.course.subject}}: {{cart_item.course.catalog_number}}</td>
                <td>{{cart_item.course.units}}</td>
                <td>{{cart_item.course.instructor_name}}</td>
                <t
                <td>
                    <a href="{{cart_item.course.get_remove_from_cart_url}}" class="btn btn-primary btn-md my-0 p" >Remove from cart
                    </a>
    
                </td>
            </tr>
    
            {% empty %}
            <tr>
                <td colspan="5">Your Cart is Empty</td>
            </tr>
    
             <tr>
                <td colspan="5">
                    <a href="/" class="btn btn-primary float-right">Go Back</a>
                </td>
            </tr>
    
            {% endfor %}
    
            {% if object.get_total_units %}
            <tr>
                <td colspan="4"><b>Total Order Price</b></td>
                <td>${{ object.get_total_units }}</td>
            </tr>
             <tr>
                <td colspan="5">
                    <a href="/" class="btn btn-primary float-right">Go Back</a>
                </td>
            </tr>
            
            {% endif %}
            
            </tbody>
        </table>
    
            </div>
        </div>
    </main>
{% else %}
    
    <p>Please login in order to utilize the shopping cart feature.</p>
    <form action="..">
        <input type="submit" value="Go back to Home Page" />
    </form>
{% endif %}

{% endblock content %}
